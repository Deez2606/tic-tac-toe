<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tic‚ÄëTac‚ÄëToe</title>
  <style>
    :root {
      --bg: #0f172a;          /* slate-900 */
      --panel: #111827;       /* gray-900 */
      --panel-2: #1f2937;     /* gray-800 */
      --acc: #22c55e;         /* emerald-500 */
      --acc-2: #60a5fa;       /* blue-400 */
      --text: #e5e7eb;        /* gray-200 */
      --muted: #9ca3af;       /* gray-400 */
      --win: #f59e0b;         /* amber-500 */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1000px 600px at 10% 10%, #0b1024 0%, var(--bg) 60%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .app {
      width: min(92vw, 540px);
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 20px;
      box-shadow: 0 30px 80px rgba(0,0,0,0.45);
      padding: 22px;
    }

    header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    h1 { font-size: clamp(20px, 2.8vw, 28px); margin: 0; letter-spacing: 0.5px; }

    .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
    .controls .group { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: 14px; padding: 10px 12px; }
    label, select { font-size: 14px; color: var(--muted); }
    select, button, input[type="checkbox"] { cursor: pointer; }

    .board { margin: 20px auto 8px; width: min(92vw, 420px); display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    .cell {
      aspect-ratio: 1 / 1;
      border: 0;
      border-radius: 16px;
      background: linear-gradient(180deg, #0f172a, #1f2937);
      color: var(--text);
      font-weight: 700;
      font-size: clamp(40px, 8vw, 64px);
      display: grid;
      place-items: center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 12px 24px rgba(0,0,0,0.35);
      transition: transform 120ms ease, box-shadow 120ms ease, background 200ms ease;
    }
    .cell:hover { transform: translateY(-2px); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 16px 28px rgba(0,0,0,0.45); }
    .cell:disabled { opacity: 0.9; cursor: not-allowed; }
    .cell.win { background: linear-gradient(180deg, #14532d, #166534); color: #dcfce7; box-shadow: 0 16px 28px rgba(20, 83, 45, 0.45); }

    .status { text-align: center; margin: 8px 0 16px; color: var(--muted); font-size: 14px; min-height: 22px; }

    .actions { display: flex; justify-content: center; gap: 10px; margin: 8px 0 18px; flex-wrap: wrap; }
    .btn {
      padding: 10px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.08);
      background: linear-gradient(180deg, #0b1728, #112033);
      color: var(--text); font-weight: 600; letter-spacing: 0.3px; transition: transform 100ms ease, box-shadow 120ms ease; cursor: pointer;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 10px 18px rgba(0,0,0,0.35); }

    .score {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 6px;
    }
    .score .card { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: 14px; padding: 12px; text-align: center; }
    .score .card h3 { margin: 0 0 6px; font-size: 13px; color: var(--muted); font-weight: 600; letter-spacing: 0.4px; }
    .score .card .num { font-size: 22px; font-weight: 800; }

    footer { text-align: center; color: var(--muted); font-size: 12px; margin-top: 10px; }
    a { color: var(--acc-2); text-decoration: none; }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Tic Tac Toe Game">
    <header>
      <h1>‚ùå Tic‚ÄëTac‚ÄëToe ‚≠ï</h1>
    </header>

    <div class="controls" aria-label="Game controls">
      <div class="group">
        <label for="mode">Mode</label><br>
        <select id="mode" aria-label="Game mode">
          <option value="pvp">2 Players (same device)</option>
          <option value="cpu">Vs Computer (O)</option>
        </select>
      </div>
      <div class="group">
        <label for="xStarts">
          <input type="checkbox" id="xStarts" checked /> X starts
        </label>
        <div style="font-size:12px;color:var(--muted);margin-top:6px">Change who starts each new game.</div>
      </div>
    </div>

    <div class="board" role="grid" aria-label="Game board">
      <button class="cell" data-idx="0" aria-label="Cell 1" />
      <button class="cell" data-idx="1" aria-label="Cell 2" />
      <button class="cell" data-idx="2" aria-label="Cell 3" />
      <button class="cell" data-idx="3" aria-label="Cell 4" />
      <button class="cell" data-idx="4" aria-label="Cell 5" />
      <button class="cell" data-idx="5" aria-label="Cell 6" />
      <button class="cell" data-idx="6" aria-label="Cell 7" />
      <button class="cell" data-idx="7" aria-label="Cell 8" />
      <button class="cell" data-idx="8" aria-label="Cell 9" />
    </div>

    <div class="status" id="status" aria-live="polite">X to move</div>

    <div class="actions">
      <button id="newGame" class="btn">New Game</button>
      <button id="resetScores" class="btn" title="Clear saved totals">Reset Scoreboard</button>
    </div>

    <div class="score" aria-label="Scoreboard">
      <div class="card"><h3>‚ùå X Wins</h3><div id="xWins" class="num">0</div></div>
      <div class="card"><h3>ü§ù Draws</h3><div id="draws" class="num">0</div></div>
      <div class="card"><h3>‚≠ï O Wins</h3><div id="oWins" class="num">0</div></div>
    </div>

    <footer>Made By Dhinesh</footer>
  </div>

  <script>
  (() => {
    const cells = Array.from(document.querySelectorAll('.cell'));
    const statusEl = document.getElementById('status');
    const xWinsEl = document.getElementById('xWins');
    const oWinsEl = document.getElementById('oWins');
    const drawsEl = document.getElementById('draws');
    const newGameBtn = document.getElementById('newGame');
    const resetScoresBtn = document.getElementById('resetScores');
    const modeSel = document.getElementById('mode');
    const xStartsChk = document.getElementById('xStarts');

    const LSK = 'tttScores.v1';
    const winning = [
      [0,1,2],[3,4,5],[6,7,8], // rows
      [0,3,6],[1,4,7],[2,5,8], // cols
      [0,4,8],[2,4,6]          // diags
    ];

    let board = Array(9).fill('');
    let turn = 'X';
    let gameOver = false;
    let mode = 'pvp'; // 'pvp' or 'cpu' (CPU plays 'O')
    let scores = loadScores();
    renderScores();

    function loadScores(){
      try { return JSON.parse(localStorage.getItem(LSK)) || {X:0,O:0,D:0}; } catch { return {X:0,O:0,D:0}; }
    }
    function saveScores(){ localStorage.setItem(LSK, JSON.stringify(scores)); }
    function renderScores(){ xWinsEl.textContent = scores.X; oWinsEl.textContent = scores.O; drawsEl.textContent = scores.D; }

    function setStatus(msg){ statusEl.textContent = msg; }

    function availableMoves(b=board){ return b.map((v,i)=>v?null:i).filter(v=>v!==null); }

    function checkWin(b=board){
      for(const line of winning){
        const [a,b1,c] = line; const v = b[a];
        if(v && v === b[b1] && v === b[c]) return { winner: v, line };
      }
      if(availableMoves(b).length === 0) return { winner: null, line: null }; // draw
      return null;
    }

    function resetBoard(){
      board = Array(9).fill('');
      gameOver = false;
      turn = xStartsChk.checked ? 'X' : 'O';
      cells.forEach(c=>{ c.textContent=''; c.disabled=false; c.classList.remove('win'); });
      setStatus(`${turn} to move`);
      if(mode === 'cpu' && turn === 'O') cpuMove();
    }

    function endGame(result){
      gameOver = true;
      if(result.winner){
        setStatus(`${result.winner} wins!`);
        if(result.line) result.line.forEach(i => cells[i].classList.add('win'));
        scores[result.winner]++; saveScores(); renderScores();
      } else {
        setStatus('Draw!');
        scores.D++; saveScores(); renderScores();
      }
      // disable remaining cells
      cells.forEach(c=>c.disabled=true);
    }

    function handleMove(i){
      if(gameOver || board[i]) return;
      board[i] = turn;
      cells[i].textContent = turn;
      const outcome = checkWin();
      if(outcome){ endGame(outcome); return; }
      turn = turn === 'X' ? 'O' : 'X';
      setStatus(`${turn} to move`);
      if(mode === 'cpu' && turn === 'O') cpuMove();
    }

    // --- Simple Heuristic AI for 'O' ---
    function cpuMove(){
      // small delay for UX
      setTimeout(()=>{
        const i = chooseCpuIndex();
        if(i != null) handleMove(i);
      }, 350);
    }

    function chooseCpuIndex(){
      const me = 'O', opp = 'X';
      // clone helper
      const tryMove = (b, idx, v) => { const copy = b.slice(); copy[idx]=v; return copy; };
      const moves = availableMoves();
      // 1) Win if possible
      for(const m of moves){ if(checkWin(tryMove(board,m,me))?.winner===me) return m; }
      // 2) Block opponent
      for(const m of moves){ if(checkWin(tryMove(board,m,opp))?.winner===opp) return m; }
      // 3) Take center
      if(moves.includes(4)) return 4;
      // 4) Take a corner
      const corners = moves.filter(m=>[0,2,6,8].includes(m));
      if(corners.length) return randomFrom(corners);
      // 5) Take a side
      const sides = moves.filter(m=>[1,3,5,7].includes(m));
      if(sides.length) return randomFrom(sides);
      return null;
    }

    function randomFrom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    // Wire up UI
    cells.forEach((btn)=> btn.addEventListener('click', () => handleMove(+btn.dataset.idx)) );
    newGameBtn.addEventListener('click', resetBoard);
    resetScoresBtn.addEventListener('click', ()=>{ scores={X:0,O:0,D:0}; saveScores(); renderScores(); resetBoard(); });
    modeSel.addEventListener('change', (e)=>{ mode = e.target.value; resetBoard(); });
    xStartsChk.addEventListener('change', resetBoard);

    // Bootstrap first game
    resetBoard();
  })();
  </script>
</body>
</html>
